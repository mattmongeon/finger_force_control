#include "electrode_tdc_compensator.h"
#include <cmath>


////////////////////////////////////////////////////////////////////////////////
//  Construction / Destruction
////////////////////////////////////////////////////////////////////////////////

cElectrodeTdcCompensator::cElectrodeTdcCompensator(double a, double b, double c, double d)
	: mA(a), mB(b), mC(c), mD(d)
{

}

////////////////////////////////////////////////////////////////////////////////

cElectrodeTdcCompensator::~cElectrodeTdcCompensator()
{

}

////////////////////////////////////////////////////////////////////////////////

cElectrodeTdcCompensator::cElectrodeTdcCompensator(const cElectrodeTdcCompensator& copyMe)
	: mA(copyMe.mA), mB(copyMe.mB), mC(copyMe.mC), mD(copyMe.mD)
{

}

////////////////////////////////////////////////////////////////////////////////

cElectrodeTdcCompensator& cElectrodeTdcCompensator::operator=(const cElectrodeTdcCompensator& rhs)
{
	mA = rhs.mA;
	mB = rhs.mB;
	mC = rhs.mC;
	mD = rhs.mD;

	return *this;
}

////////////////////////////////////////////////////////////////////////////////
//  Interface Functions
////////////////////////////////////////////////////////////////////////////////

double cElectrodeTdcCompensator::CompensateTdc(double tdc, double electrode) const
{
	return electrode - GetUnforcedElectrodeValue(tdc);
}

////////////////////////////////////////////////////////////////////////////////

double cElectrodeTdcCompensator::GetUnforcedElectrodeValue(double tdc) const
{
	return mA*pow(tdc+mB, mC) + mD;
}


